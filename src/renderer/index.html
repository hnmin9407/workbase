<!-- index.html -->

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>WORKBASE</title>

    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/tooltip.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"
    />

  </head>

  <body>
    <div class="main">
      <div id="sidebar-component" class="sidebar"></div>

      <div class="content">
        <div class="drag-control">
          <div class="window-control">
            <button class="control-btn" id="min-btn">
              <img src="../../assets/titlebar/min-icon.svg" alt="최소화" />
            </button>
            <button class="control-btn" id="max-btn">
              <img
                id="max-icon"
                src="../../assets/titlebar/max-icon-1.svg"
                alt="최대화"
              />
            </button>
            <button class="control-btn" id="close-btn">
              <img src="../../assets/titlebar/close-icon.svg" alt="닫기" />
            </button>
          </div>
        </div>
        <div class="todo">
          <div class="header">
            <span class="date">2025년 10월 18일 토요일</span>
            <span class="title">전체 보관함</span>
          </div>
          <div class="input-container">
            <input
              type="text"
              class="todo-input"
              placeholder="새 할 일 추가..."
            />
          </div>
        </div>
      </div>
    </div>

    <!-- 팝업 -->
    <div class="popup" id="group-add-popup">
      <div class="top">
        <div class="title">그룹 추가</div>
        <input placeholder="그룹 이름을 입력해 주세요" />
      </div>
      <div class="bottom">
        <button class="cancel-button popup-close">취소</button>
        <button class="add-button" id="confirm-group-add">추가</button>
      </div>
    </div>

    <div class="popup" id="project-add-popup">
      <div class="top">
        <div class="title">프로젝트 추가</div>
        <input placeholder="프로젝트 이름을 입력해 주세요" />
      </div>
      <div class="bottom">
        <button class="cancel-button popup-close">취소</button>
        <button class="add-button" id="confirm-project-add">추가</button>
      </div>
    </div>

    <div class="popup" id="project-rename-popup">
      <div class="top">
        <div class="title">프로젝트 이름 바꾸기</div>
        <input placeholder="변경할 프로젝트 이름을 입력해 주세요" />
      </div>
      <div class="bottom">
        <button class="cancel-button popup-close">취소</button>
        <button class="add-button" id="confirm-project-rename">수정</button>
      </div>
    </div>

    <div class="popup" id="group-rename-popup">
      <div class="top">
        <div class="title">그룹 이름 바꾸기</div>
        <input placeholder="변경할 그룹 이름을 입력해 주세요" />
      </div>
      <div class="bottom">
        <button class="cancel-button popup-close">취소</button>
        <button class="add-button" id="confirm-group-rename">수정</button>
      </div>
    </div>

    <div class="popup" id="group-delete-popup">
      <div class="top">
        <div class="text-wrap">
          <svg data-type="delete">
            <use href="../../assets/icons/icons.svg#icon-caution"></use>
          </svg>
            <span class="confirm-text">정말 그룹을 삭제하시겠습니까?</span>
            <span class="sub-text">해당 그룹의 모든 프로젝트도 함께 삭제됩니다.</span>
        </div>
      </div>
      <div class="bottom">
        <button class="cancel-button popup-close">취소</button>
        <button class="delete-button" id="confirm-group-delete">삭제</button>
      </div>
    </div>

    <div class="popup" id="project-delete-popup">
      <div class="top">
        <div class="text-wrap">
          <svg data-type="delete">
            <use href="../../assets/icons/icons.svg#icon-caution"></use>
          </svg>
            <span class="confirm-text">정말 프로젝트를 삭제하시겠습니까?</span>
            <span class="sub-text">삭제된 프로젝트는 복구할 수 없습니다.</span>
        </div>
      </div>
      <div class="bottom">
        <button class="cancel-button popup-close">취소</button>
        <button class="delete-button" id="confirm-project-delete">삭제</button>
      </div>
    </div>

    <div class="popup-overlay"></div>

    <!-- 오른쪽 마우스 클릭 팝업 -->
    <div id="project-context-menu" class="context-menu">
      <button id="rename-project-btn">
        <svg><use href="../../assets/icons/icons.svg#icon-edit"></use></svg>
        <span>이름 바꾸기</span>
      </button>
      <button id="delete-project-btn" class="delete">
        <svg><use href="../../assets/icons/icons.svg#icon-delete"></use></svg>
        <span>삭제하기</span>
      </button>
    </div>

    <div id="group-context-menu" class="context-menu">
      <button id="group-up-button">
        <svg>
          <use href="../../assets/icons/icons.svg#icon-context-up"></use>
        </svg>
        <span>위로 이동</span>
      </button>
      <button id="group-down-button">
        <svg>
          <use href="../../assets/icons/icons.svg#icon-context-down"></use>
        </svg>
        <span>아래로 이동</span>
      </button>
      <div class="context-line"></div>
      <button id="rename-group-btn">
        <svg><use href="../../assets/icons/icons.svg#icon-edit"></use></svg>
        <span>이름 바꾸기</span>
      </button>
      <button id="delete-group-btn" class="delete">
        <svg><use href="../../assets/icons/icons.svg#icon-delete"></use></svg>
        <span>삭제하기</span>
      </button>
    </div>

    <script src="./js/sidebar.js"></script>
    <script src="./js/tooltip.js"></script>
    <script src="./js/titlebar.js"></script>
    
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("./html/component/sidebar.html")
          .then((response) => response.text())
          .then((html) => {
            const sidebar = document.getElementById("sidebar-component");
            if (sidebar) {
              sidebar.innerHTML = html;

              initSidebar();
              initTooltip();
            }
          })
          .catch((error) => console.error("사이드바 로딩 오류:", error));
      });
    </script>
  </body>
</html>
