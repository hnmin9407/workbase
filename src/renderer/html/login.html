<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <script>
      (function () {
        // localStorage에서 저장된 테마를 확인
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          // <html> 태그에 data-theme="dark" 속성 추가
          document.documentElement.dataset.theme = "dark";
        } else {
          // 기본값은 'light'
          document.documentElement.dataset.theme = "light";
        }
      })();
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WORKBASE</title>

    <link rel="stylesheet" href="../styles/common.css" />
    <link rel="stylesheet" href="../styles/login.css" />
    <link rel="stylesheet" href="../styles/window-control.css" />
    <link rel="stylesheet" href="../styles/tooltip.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"
    />
  </head>

  <body>
    <div class="window-control" style="border-bottom: none">
      <div class="left"></div>
      <div class="right">
        <div class="mode-toggle-button" id="mode-toggle-button" style="margin-right: 16px;" data-tooltip="테마 전환" data-direction="bottom">
          <svg class="icon" style="width: 15px">
            <use href="#icon-dark-mode"></use>
          </svg>
        </div>
        <div class="window-control-button" id="window-minimize">
          <svg class="icon" style="width: 12px">
            <use href="#icon-minimize"></use>
          </svg>
        </div>
        <div class="window-control-button" id="window-maximize">
          <svg class="icon" style="width: 12px">
            <use href="#icon-maximize"></use>
          </svg>
        </div>
        <div class="window-control-button" id="window-close">
          <svg class="icon"><use href="#icon-close"></use></svg>
        </div>
      </div>
    </div>

    <div class="login-body">
      <div class="login-container">
        <div class="left"></div>
        <div class="right">
          <div class="login-wrap">
            <div class="login-title">
              <h1>LOG IN</h1>
              <h3 style="opacity: 0.6;">
                로그인 후 서비스를 이용하실 수 있습니다.
              </h3>
            </div>
            <form class="login-form">
              <div class="input-field-wrapper">
                <input
                  class="login-input-id"
                  type="text"
                  id="userid"
                  placeholder=" "
                />
                <label for="userid" class="placeholder-id">아이디</label>
              </div>

              <div class="input-field-wrapper">
                <input
                  class="login-input-pw"
                  type="password"
                  id="userpw"
                  placeholder=" "
                />
                <label for="userpw" class="placeholder-pw">비밀번호</label>
                <div
                  class="pw-toggle-icon"
                  id="pw-toggle-button"
                  data-tooltip="비밀번호 표시/숨김"
                  data-direction="bottom"
                >
                  <svg class="icon" style="width: 15px">
                    <use href="#icon-hidden-eye"></use>
                  </svg>
                </div>
              </div>
              <div class="autologin-button">
                <div class="checkbox">
                  <svg class="icon" style="width: 12px;">
                    <use href="#icon-check"></use>
                  </svg>
                </div>
                <span>로그인 상태 유지</span>
              </div>
              <button type="submit" class="login-button" id="login-button">
                <span>로그인</span>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div id="alert-popup" class="alert-popup">
      <div class="alert-content">
        <div class="left">
          <div class="alert-icon">
            <svg>
              <use href="#icon-caution"></use>
            </svg>
          </div>
        </div>
        <div class="right">
          <div class="alert-title">알림</div>
          <div id="alert-message" class="alert-message"></div>
        </div>
      </div>
    </div>

    <script src="../js/login.js"></script>
    <script src="../js/tooltip.js"></script>

    <script>
      // ✅ window-control.js 로드
      const script = document.createElement("script");
      script.src = "../js/window-control.js";
      document.body.appendChild(script);

      fetch("../../../assets/icons/icons.svg")
        .then((res) => res.text())
        .then((data) => {
          document.body.insertAdjacentHTML("afterbegin", data);
        })
        .catch((err) => console.error("SVG 불러오기 실패:", err));

      initTooltip();
    </script>
  </body>
</html>
